<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FigiKhan • Servicios y precios</title>

  <!-- Tu hoja principal (cache-buster) -->
  <link rel="stylesheet" href="estilos.css?v=12" />

  <!-- Refuerzo mínimo: overlay encima y clickeable -->
  <style>
    .distort-overlay{
      position: fixed !important; inset: 0 !important;
      z-index: 200 !important;
      background: rgba(0,0,0,.18) !important;
      backdrop-filter: blur(2.5px) saturate(110%) !important;
      opacity: 0 !important; pointer-events: none !important;
      transition: opacity .18s ease !important;
      animation: none !important;
    }
    .distort-overlay.is-visible{ opacity:1 !important; pointer-events:auto !important; }
    .card--focused{ position:relative !important; z-index:201 !important; }
    .logo{ height:65px; width:auto; display:block; }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="site-header">
    <nav class="navbar container">
      <a href="#inicio" class="brand" aria-label="FigiKhan">
        <img src="logopng.png" alt="Logo FigiKhan" class="logo" />
        <span class="sr-only">FigiKhan</span>
      </a>
      <ul class="nav-links">
        <li><a href="index.html" class="active">Inicio</a></li>
        <li><a href="servicios.html">Servicios</a></li>
        <!-- <li><a href="proyectos.html">Proyectos</a></li> -->
      </ul>
    </nav>
  </header>

  <!-- Overlay global (UNO solo) -->
  <div id="overlay" class="distort-overlay" aria-hidden="true"></div>

  <main class="container">
    <!-- Hero -->
    <section id="inicio" class="hero">
      <h1>FigiKhan</h1>
      <p>Miramos hacia el futuro, potenciamos tus ideas y trabajamos en tus proyectos. Seleccioná el plan que se ajuste a tus necesidades.</p>
    </section>

    <!-- FRONTEND -->
    <section id="frontend" class="section">
      <h2></h2>
      <p class="section-desc"></p>
      <div class="grid" id="frontend-grid"></div>
    </section>

    <!-- CALCULADORA DE INVERSIÓN -->
    <section id="inversion" class="section">
      <div class="calc card">
        <div class="card-head">
          <span class="badge">Plan a medida</span>
          <h3>¿Cuánto querés invertir?</h3>
          <p class="desc">
            Ingresá un monto en ARS. Los beneficios crecen a medida que aumenta la inversión.
            Este plan incluye entregables de <strong>Frontend</strong>.
          </p>
        </div>

        <div class="card-body">
          <div class="calc-inputs">
            <label class="calc-field">
              <span>Monto (ARS)</span>
              <input id="monto-input" type="number" placeholder="5000" inputmode="numeric" />
            </label>
          </div>

          <p id="calc-msg" class="note" aria-live="polite"></p>

          <div class="calc-summary">
            <div class="chip">
              <span>Presupuesto:</span>
              <strong id="monto-formateado">$ 5.000</strong>
            </div>
            <div class="chip">
              <span>Alcance:</span>
              <strong id="alcance-label">Frontend</strong>
            </div>
          </div>

          <div class="calc-results">
            <h4>Esto podemos desarrollar con tu inversión:</h4>
            <ul id="lista-resultados" class="features"></ul>
          </div>
        </div>

        <div class="card-foot">
          <div class="actions">
            <button class="btn btn-outline btn-info" type="button" aria-expanded="false">Más info</button>
            <a id="btn-cotizar" class="btn" target="_blank" rel="noopener">Cotizar por WhatsApp</a>
          </div>
        </div>
      </div>
    </section>

    <!-- CTA AFILIADOS (opcional) -->
    <section id="afiliados" class="section">
      <div class="cta">
        <h2>¿Querés trabajar con nosotros?</h2>
        <p>Llevate un 10% de la compra del cliente una vez que comience el trabajo.</p>
        <a
          class="btn"
          target="_blank"
          rel="noopener"
          href="https://wa.me/541141999497?text=Hola%20FigiKhan%2C%20quiero%20trabajar%20con%20ustedes%20como%20afiliado%20y%20cobrar%20el%2010%25%20cuando%20inicie%20el%20proyecto.">
          Anotarme ahora
        </a>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="site-footer">
    <p>
      © 2025 Data — Desarrollo web a medida ·
      <a href="https://instagram.com/figi_khan" target="_blank" rel="noopener" aria-label="Abrir Instagram de FigiKhan">Instagram</a>
      <a href="https://x.com/figikhan" target="_blank" rel="noopener" aria-label="Abrir X de FigiKhan"> || X</a>
    </p>
  </footer>

  <!-- Botón flotante WhatsApp -->
  <a
    class="btn-wpp"
    href="https://wa.me/541141999497?text=Hola%20FigiKhan%2C%20quiero%20hacer%20una%20consulta."
    target="_blank" rel="noopener" aria-label="Consultar por WhatsApp" title="Chatear por WhatsApp">
    <svg viewBox="0 0 64 64" aria-hidden="true" focusable="false">
      <g transform="translate(8,8)">
        <path fill="#ffffff" d="M24 0c13.25 0 24 10.75 24 24S37.25 48 24 48c-4.1 0-7.96-1.03-11.34-2.86L0 48l2.86-11.34C1.03 33.96 0 30.1 0 26 0 12.75 10.75 2 24 2Z"/>
        <path fill="#0f1115" d="M33.8 31.6c-.7 1.9-2.6 3.8-4.5 4.4-1.1.3-2.4.2-3.7-.2-3.2-1-7.1-3.9-9.7-6.5-2.6-2.6-5.5-6.5-6.5-9.7-.5-1.3-.5-2.6-.2-3.7.6-1.9 2.5-3.8 4.4-4.5.5-.2 1-.1 1.4.3l4 4c.4.4.5 1 .2 1.5l-1.8 2.9c-.3.5-.3 1.1 0 1.7.6 1.1 1.8 2.7 3.3 4.2 1.5 1.5 3.2 2.7 4.2 3.3.5.3 1.2.3 1.7 0l2.9-1.8c.5-.3 1.1-.3 1.5.2l4 4c.4.4.5.9.3 1.4Z"/>
      </g>
    </svg>
    <span class="sr-only">WhatsApp</span>
  </a>

  <!-- ======================= JS ======================= -->
  <script>
    /* ===== Utils ===== */
    const ARS = new Intl.NumberFormat('es-AR', { style: 'currency', currency: 'ARS', maximumFractionDigits: 0 });
    const WPP_BASE = 'https://wa.me/541141999497?text=';
    const precioConTipo = (base, tipo) => Math.round(({particular:1.0, negocios:1.5, empresa:2.5}[tipo] ?? 1.0) * base);
    const linkWpp = (servicio, tipo, precioFinal) =>
      WPP_BASE + encodeURIComponent(`Hola FigiKhan, quiero consultar por: ${servicio} | Tipo: ${tipo.toUpperCase()} | Precio: ${ARS.format(precioFinal)}.`);

    /* ===== Contenido ===== */
    const INFO_FRONTEND = {
      'Landing Page Express': [
        '¿Qué es? Una página simple para presentarte y conseguir contactos.',
        'Ideal para: pizzería, peluquería, profe particular, entrenador, jardinería.',
        'Incluye: sección principal, 3 beneficios, testimonios y botón grande a WhatsApp.',
        'Ejemplo: “Reservá tu turno por WhatsApp”.',
        'Tiempo estimado: 2 a 3 días hábiles.',
        'Aclaración: no es tienda online (sin pagos).'
      ],
      'One Page Responsive': [
        'Todo en una sola página que se ve bien en celular.',
        'Incluye: Quién soy, Qué ofrezco, Galería/Trabajos, Contacto, redes sociales.',
        'Tiempo estimado: 3 a 5 días hábiles.'
      ],
      'Maquetación HTML/CSS': [
        'Convertimos tu diseño (Figma/imagen) en web real.',
        'Entrega lista para hosting. Responsive y prolija.'
      ],
      'UI Animada + Interacciones': [
        'Efectos suaves al scroll, carrusel, FAQs, modales y formularios con validación.'
      ],
      'Sitio Multipágina Básico': [
        'Inicio, Quiénes somos, Servicios, Preguntas frecuentes, Contacto.',
        'Incluye SEO básico en títulos y descripciones.'
      ]
    };

    const FRONTEND_SERVICIOS = [
      { nombre:'Landing Page Express', precio:25000, desc:'Una página simple que cuenta quién sos y tiene un botón grande a WhatsApp para que te contacten.' },
      { nombre:'One Page Responsive', precio:45000, desc:'Todo en una sola página: quién sos, qué ofrecés, fotos y contacto. Se ve perfecto en celular.' },
      { nombre:'Maquetación HTML/CSS', precio:50000, desc:'Convierto tu diseño (Figma o imagen) en una web real, ordenada y lista para publicar.' },
      { nombre:'UI Animada + Interacciones', precio:65000, desc:'Efectos suaves, carruseles, FAQs y formularios completos.' },
      { nombre:'Sitio Multipágina Básico', precio:125000, desc:'Sitio clásico de 5 secciones con menú y formulario.' }
    ];

    /* ===== Render de tarjetas ===== */
    function crearLista(features){
      const ul = document.createElement('ul'); ul.className = 'features';
      features.forEach(t => { const li = document.createElement('li'); li.textContent = t; ul.appendChild(li); });
      return ul;
    }

    function crearTarjeta({ nombre, descripcion, precioBase, categoria }){
      const id = nombre.toLowerCase().replace(/\s+/g,'-').replace(/[^\w-]/g,'');
      const tipoName = `tipo-${id}`;
      const card = document.createElement('article');
      card.className='card';
      card.innerHTML = `
        <div class="card-head">
          <span class="badge">${categoria}</span>
          <h3>${nombre}</h3>
          <p class="desc">${descripcion}</p>
        </div>
        <div class="card-body">
          <div class="tipos">
            <label class="tipo"><input type="radio" name="${tipoName}" value="particular" checked /> Particular</label>
            <label class="tipo"><input type="radio" name="${tipoName}" value="negocios" /> Negocios</label>
            <label class="tipo"><input type="radio" name="${tipoName}" value="empresa" /> Empresa</label>
          </div>
          <div class="precio"><span>Precio:</span>
            <strong class="monto" data-precio="${precioBase}">${ARS.format(precioBase)}</strong>
          </div>
          <div class="more" id="more-${id}" hidden aria-hidden="true"></div>
        </div>
        <div class="card-foot">
          <div class="actions">
            <button class="btn btn-outline btn-info" type="button" aria-expanded="false" aria-controls="more-${id}">Más info</button>
            <a class="btn" target="_blank" rel="noopener">Consultar por WhatsApp</a>
          </div>
        </div>
      `;

      // Detalles
      const more = card.querySelector('.more');
      more.appendChild(crearLista(INFO_FRONTEND[nombre] || ['Detalles del servicio.']));

      // Precio + WhatsApp
      const radios = card.querySelectorAll(`input[name="${tipoName}"]`);
      const montoEl = card.querySelector('.monto');
      const btnWpp  = card.querySelector('.btn:not(.btn-outline)');
      function sync(){
        const tipo = [...radios].find(r => r.checked).value;
        const final = precioConTipo(Number(montoEl.dataset.precio), tipo);
        montoEl.textContent = ARS.format(final);
        btnWpp.href = linkWpp(nombre, tipo, final);
      }
      radios.forEach(r => r.addEventListener('change', sync));
      sync();

      return card;
    }

    function renderTarjetas(){
      const grid = document.getElementById('frontend-grid');
      FRONTEND_SERVICIOS.forEach(s => {
        const card = crearTarjeta({ nombre: s.nombre, descripcion: s.desc, precioBase: s.precio, categoria: 'Frontend' });
        grid.appendChild(card);
      });
    }

    /* ===== Cierre genérico (usado por varias rutas) ===== */
    const overlayEl = document.getElementById('overlay');

    function closeCard(card, silent=false){
      if (!card) return;
      const more = card.querySelector('.more');
      const btn  = card.querySelector('.btn-info');
      if (more){ more.hidden = true; more.setAttribute('aria-hidden','true'); }
      if (btn){ btn.setAttribute('aria-expanded','false'); btn.textContent = 'Más info'; }
      card.classList.remove('card--focused');

      const stillOpen = document.querySelector('.card.card--focused');
      if (!stillOpen){
        overlayEl.classList.remove('is-visible'); overlayEl.setAttribute('aria-hidden','true');
        document.body.classList.remove('modal-active');
      }
      if (!silent && overlayEl && overlayEl.focus) overlayEl.focus();
    }

    /* ===== Cierre automático: se arma al abrir ===== */
    function armarCierreAuto(card){
      // Deferimos para NO capturar el mismo click que abrió
      setTimeout(() => {
        const handler = (ev) => {
          // Si el clic fue sobre el toggle, dejamos que el toggle maneje
          const esToggle = ev.target.closest('.btn-info,[data-action="more"],[aria-controls^="more-"]');
          if (esToggle) return;
          closeCard(card);
        };
        // Registramos una sola vez, en captura (y con fallback por si pointerdown no dispara)
        document.addEventListener('pointerdown', handler, { capture:true, once:true, passive:true });
        document.addEventListener('click',       handler, { capture:true, once:true });
      }, 0);
    }

    /* ===== Toggle abrir/cerrar (delegación) ===== */
    document.addEventListener('click', (e) => {
      const btn = e.target.closest('.btn-info');
      if (!btn) return;

      const card = btn.closest('.card');
      const more = card.querySelector('.more');

      const isHidden = more.hasAttribute('hidden') || more.hidden;

      if (isHidden) {
        // Cerrar otra si estaba abierta
        const openCard = document.querySelector('.card.card--focused');
        if (openCard && openCard !== card) closeCard(openCard, true);

        // ABRIR
        more.hidden = false; more.setAttribute('aria-hidden','false');
        btn.setAttribute('aria-expanded','true'); btn.textContent = 'Menos info';
        card.classList.add('card--focused');
        overlayEl.classList.add('is-visible'); overlayEl.setAttribute('aria-hidden','false');
        document.body.classList.add('modal-active');

        // >>> CIERRE AUTOMÁTICO EN EL PRÓXIMO CLIC <<<
        armarCierreAuto(card);

      } else {
        // CERRAR
        closeCard(card);
      }
    });

    /* ===== Cerrar con overlay y Escape (extra) ===== */
    overlayEl.addEventListener('click', () => {
      const card = document.querySelector('.card.card--focused');
      if (card) closeCard(card);
    });
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        const card = document.querySelector('.card.card--focused');
        if (card) closeCard(card);
      }
    });

    /* ===== Calculadora ===== */
    const MIN_INV = 5000, MAX_INV = 5000000, STEP = 20000;
    const FEATURES_FE = [
      'Currículum web (sección única) y archivo descargable',
      'Landing Page Express con CTA a WhatsApp',
      'One Page Responsive (quién soy, servicios, trabajos, contacto)',
      'UI animada suave (aparición al scroll, carrusel simple)',
      'Formulario de contacto con validación',
      'Galería de trabajos / portfolio básico',
      'Sitio Multipágina básico (5 secciones)',
      'Optimización de performance (Lighthouse 80+)',
      'SEO básico: títulos, descripciones y Open Graph',
      'Integración de Analytics y mapa de calor',
      'Copy básico (hasta 500 palabras)',
      'Optimización móvil y accesibilidad AA',
      'Hosting estático + deploy (orientación)',
      'Gestión de dominio .com.ar (orientación)',
      'Soporte 30 días post-lanzamiento',
      'Micro-landing para campañas',
      'Sección de FAQs autoadministrable (estática)',
      'Integración con redes sociales y chat',
      'Componentes UI premium (tabs, acordeón, modales)',
      'Biblioteca de iconos y animaciones sutiles'
    ];
    const clamp = (n,min,max)=>Math.max(min,Math.min(max,n));
    const MAX_SERVICIOS = MIN_INV + (FEATURES_FE.length - 1) * STEP;

    const calcMsg = () => document.getElementById('calc-msg');
    const listar = (arr) => {
      const ul = document.getElementById('lista-resultados'); ul.innerHTML = '';
      arr.forEach(t => { const li = document.createElement('li'); li.textContent = t; ul.appendChild(li); });
    };

    function alcance(m){
      const niveles = m < MIN_INV ? 0 : Math.min(Math.floor((m - MIN_INV)/STEP) + 1, FEATURES_FE.length);
      return FEATURES_FE.slice(0, niveles);
    }

    function actualizarUIInversion(monto){
      const msgEl = calcMsg(); msgEl.textContent = ''; msgEl.className = 'note';

      let m = Number(monto||0);
      if (m > MAX_SERVICIOS){ m = MAX_SERVICIOS; msgEl.textContent = `Se alcanzó el tope de servicios ofrecidos. Ajustamos a ${ARS.format(MAX_SERVICIOS)}.`; msgEl.classList.add('note--info'); }
      if (m < MIN_INV){ msgEl.textContent = 'La inversión mínima debe ser de $5.000.'; msgEl.classList.add('note--error'); }

      document.getElementById('monto-input').value = m;
      document.getElementById('monto-formateado').textContent = ARS.format(m);
      document.getElementById('alcance-label').textContent = 'Frontend';
      listar(alcance(m));

      const resumen = (m < MIN_INV)
        ? `Hola FigiKhan, quiero invertir ${ARS.format(m)} pero veo que la inversión mínima es ${ARS.format(MIN_INV)}. ¿Me asesorás?`
        : `Hola FigiKhan, quiero invertir ${ARS.format(m)}. Alcance: Frontend. Entregables: ${alcance(m).slice(0,10).join(' • ')}${alcance(m).length>10?' • ...':''}`;
      document.getElementById('btn-cotizar').href = WPP_BASE + encodeURIComponent(resumen);
    }

    function initCalculadora(){
      const input = document.getElementById('monto-input');
      const start = 5000;
      input.value = start;
      actualizarUIInversion(start);
      input.addEventListener('input', () => actualizarUIInversion(Number(input.value||0)));
      input.addEventListener('change', () => {
        let v = Number(input.value||0);
        if (v >= MIN_INV){
          const steps = Math.round((v - MIN_INV) / STEP);
          v = MIN_INV + steps * STEP;
        }
        actualizarUIInversion(v);
      });
    }

    /* Boot */
    renderTarjetas();
    initCalculadora();
  </script>
</body>
</html>
